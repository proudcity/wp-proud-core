!function(window){"use strict";angular.module("angular-lazycompile",[]).directive("lazyCompile",["$compile","$timeout",function($compile,$timeout){return{scope:{lazyCompile:"=",lazyDecode:"=",lazyTimeout:"=",lazyTimeoutDur:"="},replace:!0,link:function(scope,element,attrs){var voidCompile,timeout,rendered=!1,timeoutVal=scope.lazyTimeout,timeoutDur=scope.lazyTimeoutDur||1e3,compile=function(value){if(value&&"false"!=value){scope.lazyDecode&&(value=decodeURIComponent(value));var lazyContent=angular.element(value);element.after(lazyContent),$compile(lazyContent)(scope.$parent),setTimeout(function(){scope.$destroy(),scope=null,element.remove(),element=null},0),rendered=!0,voidCompile(),timeout&&$timeout.cancel(timeout)}};voidCompile=scope.$watch("lazyCompile",function(value,oldVal){var doRender=!rendered&&value&&"false"!==value&&value!==oldVal;doRender&&compile(value)}),timeoutVal&&(timeout=$timeout(function(){rendered||compile(timeoutVal)},parseInt(timeoutDur)))}}}])}(window);